import SidebarItemComponent from "../Component/SidebarItemComponent";
import FooterComponent from "../Component/FooterComponent";

const template = document.createElement('template');

template.innerHTML = /*html*/`
    <link rel="stylesheet" href="${localStorage.getItem("cssFileName")}">
    <h1 class="sidebar-header">Glorious Calculator</h1>
    <section class="sidebar-menu">
        <sidebaritem-component class="sidebar-item hyperlink active" data-href="#/calculator">
            <svg slot="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  class="sidebar-icon" viewBox="0 0 60 60" preserveAspectRatio="xMidYMid meet" xml:space="preserve">
                <g>
                    <path d="M21,14h-5V9c0-0.553-0.448-1-1-1s-1,0.447-1,1v5H9c-0.552,0-1,0.447-1,1s0.448,1,1,1h5v5c0,0.553,0.448,1,1,1s1-0.447,1-1
                        v-5h5c0.552,0,1-0.447,1-1S21.552,14,21,14z"/>
                    <path d="M49,14H37c-0.552,0-1,0.447-1,1s0.448,1,1,1h12c0.552,0,1-0.447,1-1S49.552,14,49,14z"/>
                    <path d="M30,0h-2H0v28v2v28h28h2h28V30v-2V0H30z M2,2h26v26H2V2z M2,56V30h26v26H2z M56,56H30V30h26V56z M30,28V2h26v26H30z"/>
                    <path d="M37,47h12c0.552,0,1-0.447,1-1s-0.448-1-1-1H37c-0.552,0-1,0.447-1,1S36.448,47,37,47z"/>
                    <path d="M37,41h12c0.552,0,1-0.447,1-1s-0.448-1-1-1H37c-0.552,0-1,0.447-1,1S36.448,41,37,41z"/>
                    <path d="M20.707,37.293c-0.391-0.391-1.023-0.391-1.414,0L15,41.586l-4.293-4.293c-0.391-0.391-1.023-0.391-1.414,0
                        s-0.391,1.023,0,1.414L13.586,43l-4.293,4.293c-0.391,0.391-0.391,1.023,0,1.414C9.488,48.902,9.744,49,10,49
                        s0.512-0.098,0.707-0.293L15,44.414l4.293,4.293C19.488,48.902,19.744,49,20,49s0.512-0.098,0.707-0.293
                        c0.391-0.391,0.391-1.023,0-1.414L16.414,43l4.293-4.293C21.098,38.316,21.098,37.684,20.707,37.293z"/>
                </g>
            </svg>
        </sidebaritem-component>
        <sidebaritem-component class="sidebar-item hyperlink" data-href="#/scientificcalculator">
            <svg slot="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="sidebar-icon" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet" xml:space="preserve">
                <g>
                    <g>
                        <g>
                            <path d="M96.051,0v512h319.898V0H96.051z M111.789,496.262V15.738h288.423v480.525H111.789z"/>
                            <path d="M375.929,40.021H136.073v167.818h239.856V40.021z M360.191,192.102H151.811V55.759h208.381V192.102z"/>
                            <path d="M192.102,367.923h47.756v-47.754h-47.756V367.923z M207.84,335.907h16.28v16.279h-16.28V335.907z"/>
                            <path d="M136.073,367.923h47.756v-47.754h-47.756V367.923z M151.811,335.907h16.28v16.279h-16.28V335.907z"/>
                            <path d="M248.133,367.923h47.754v-47.754h-47.754V367.923z M263.87,335.907L263.87,335.907h16.279v16.279H263.87V335.907z"/>
                            <path d="M192.102,423.954h47.756v-47.754h-47.756V423.954z M207.84,391.937h16.28v16.279h-16.28V391.937z"/>
                            <path d="M136.073,423.954h47.756v-47.754h-47.756V423.954z M151.811,391.937h16.28v16.279h-16.28V391.937z"/>
                            <path d="M248.133,423.954h47.754v-47.754h-47.754V423.954z M263.87,391.937L263.87,391.937h16.279v16.279H263.87V391.937z"/>
                            <path d="M192.102,479.983h47.756v-47.754h-47.756V479.983z M207.84,447.966h16.28v16.279h-16.28V447.966z"/>
                            <path d="M136.073,479.983h47.756v-47.754h-47.756V479.983z M151.811,447.966h16.28v16.279h-16.28V447.966z"/>
                            <path d="M248.133,479.983h47.754v-47.754h-47.754V479.983z M263.87,447.966L263.87,447.966h16.279v16.279H263.87V447.966z"/>
                            <path d="M319.9,224.119h-87.775v47.754H319.9V224.119z M304.162,256.135h-56.3v-16.279h56.3V256.135z"/>
                            <path d="M304.162,367.923h79.771v-47.754h-79.771V367.923z M319.9,335.907h48.296v16.279H319.9V335.907z"/>
                            <path d="M304.162,423.954h79.771v-47.754h-79.771V423.954z M319.9,391.937h48.296v16.279H319.9V391.937z"/>
                            <path d="M304.162,479.983h79.771v-47.754h-79.771V479.983z M319.9,447.966h48.296v16.279H319.9V447.966z"/>
                            <path d="M223.848,224.119L223.848,224.119h-87.776v47.754h87.776V224.119z M208.111,256.135h-56.3v-16.279h56.3V256.135z"/>
                            <rect x="135.932" y="288.147" width="16.008" height="15.738"/>
                            <rect x="167.953" y="288.147" width="16.009" height="15.738"/>
                            <rect x="199.974" y="288.147" width="16.008" height="15.738"/>
                            <rect x="231.985" y="288.147" width="16.008" height="15.738"/>
                            <rect x="264.006" y="288.147" width="16.008" height="15.738"/>
                            <rect x="296.016" y="288.147" width="16.009" height="15.738"/>
                            <rect x="328.037" y="288.147" width="16.008" height="15.738"/>
                            <rect x="360.058" y="288.147" width="16.008" height="15.738"/>
                            <path d="M375.929,224.119h-47.756v47.754h47.756V224.119z M360.191,256.135h-16.28v-16.279h16.28V256.135z"/>
                            <rect x="264.006" y="72.037" width="16.008" height="15.738"/>
                            <rect x="296.016" y="72.037" width="16.009" height="15.738"/>
                            <rect x="328.037" y="72.037" width="16.008" height="15.738"/>
                            <rect x="167.953" y="160.084" width="80.042" height="15.738"/>
                            <rect x="264.006" y="160.084" width="32.017" height="15.738"/>
                            <rect x="312.027" y="160.084" width="32.017" height="15.738"/>
                        </g>
                    </g>
                </g>
            </svg>
        </sidebaritem-component>
        <sidebaritem-component class="sidebar-item hyperlink" data-href="#/currencyexchange">
            <svg slot="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="sidebar-icon" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet" xml:space="preserve">
                <g>
                    <g>
                        <path d="M490.667,234.667c-12.8,0-21.333,8.533-21.333,21.333c0,117.333-96,213.333-213.333,213.333
                            c-12.8,0-21.333,8.533-21.333,21.333S243.2,512,256,512c140.8,0,256-115.2,256-256C512,243.2,503.467,234.667,490.667,234.667z"/>
                    </g>
                </g>
                <g>
                    <g>
                        <path d="M256,0C115.2,0,0,115.2,0,256c0,12.8,8.533,21.333,21.333,21.333c12.8,0,21.333-8.533,21.333-21.333
                            c0-117.333,96-213.333,213.333-213.333c12.8,0,21.333-8.533,21.333-21.333C277.333,8.533,268.8,0,256,0z"/>
                    </g>
                </g>
                <g>
                    <g>
                        <path d="M454.4,51.2C439.467,32,413.867,21.333,384,21.333c-44.8,0-85.333,32-85.333,74.667c0,12.8,8.533,21.333,21.333,21.333
                            S341.333,108.8,341.333,96c0-17.067,19.2-32,42.667-32c17.067,0,29.867,4.267,36.267,12.8c6.4,8.533,21.333,10.667,29.867,4.267
                            C458.667,74.667,460.8,59.733,454.4,51.2z"/>
                    </g>
                </g>
                <g>
                    <g>
                        <path d="M384,128c-23.467,0-42.667-14.933-42.667-32c0-12.8-8.533-21.333-21.333-21.333S298.667,83.2,298.667,96
                            c0,42.667,40.533,74.667,85.333,74.667c23.467,0,42.667,14.933,42.667,32c0,17.067-19.2,32-42.667,32
                            c-17.067,0-29.867-4.267-36.267-12.8c-6.4-8.533-21.333-10.667-29.867-4.267c-10.667,8.533-10.667,21.333-4.267,29.867
                            c14.933,19.2,40.533,29.867,70.4,29.867c44.8,0,85.333-32,85.333-74.667C469.333,160,428.8,128,384,128z"/>
                    </g>
                </g>
                <g>
                    <g>
                        <path d="M384,0c-12.8,0-21.333,8.533-21.333,21.333v256c0,12.8,8.533,21.333,21.333,21.333c12.8,0,21.333-8.533,21.333-21.333
                            v-256C405.333,8.533,396.8,0,384,0z"/>
                    </g>
                </g>
                <g>
                    <g>
                        <path d="M181.333,437.333c-12.8,0-21.333,8.533-21.333,21.333c0,8.533-2.133,10.667-10.667,10.667H81.067
                            C83.2,460.8,85.333,454.4,85.333,448V320c0-12.8,8.533-21.333,21.333-21.333S128,307.2,128,320s8.533,21.333,21.333,21.333
                            c12.8,0,21.333-8.533,21.333-21.333c0-36.267-27.733-64-64-64s-64,27.733-64,64v128c0,2.133-2.133,6.4-4.267,10.667
                            c-2.133,6.4-8.533,10.667-17.067,10.667C-6.4,469.333-6.4,512,21.333,512h128c32,0,53.333-21.333,53.333-53.333
                            C202.667,445.867,194.133,437.333,181.333,437.333z"/>
                    </g>
                </g>
                <g>
                    <g>
                        <path d="M106.667,362.667H21.333C8.533,362.667,0,371.2,0,384c0,12.8,8.533,21.333,21.333,21.333h85.333
                            c12.8,0,21.333-8.533,21.333-21.333C128,371.2,119.467,362.667,106.667,362.667z"/>
                    </g>
                </g>
            </svg>
        </sidebaritem-component>
        <sidebaritem-component class="sidebar-item hyperlink" data-href="#/temperaturecalculator">
            <svg slot="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="sidebar-icon" viewBox="0 0 250.189 250.189" preserveAspectRatio="xMidYMid meet" xml:space="preserve">
                <g>
                    <path d="M159.845,147.251V34.744C159.845,15.586,144.255,0,125.093,0c-19.159,0-34.746,15.586-34.746,34.744v112.506
                        c-14.234,10.843-22.617,27.59-22.617,45.575c0,31.631,25.732,57.364,57.363,57.364c31.633,0,57.367-25.733,57.367-57.364
                        C182.46,174.842,174.077,158.095,159.845,147.251z M125.093,235.189c-23.359,0-42.363-19.004-42.363-42.364
                        c0-14.294,7.188-27.537,19.228-35.425c2.115-1.386,3.39-3.745,3.39-6.273V34.744c0-10.887,8.858-19.744,19.746-19.744
                        c10.892,0,19.752,8.857,19.752,19.744v116.383c0,2.529,1.274,4.887,3.39,6.273c12.038,7.889,19.226,21.132,19.226,35.425
                        C167.46,216.185,148.454,235.189,125.093,235.189z"/>
                    <path d="M132.595,169.042V69.924c0-4.142-3.357-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v99.118c-10.104,3.183-17.43,12.622-17.43,23.783
                        c0,13.767,11.16,24.931,24.93,24.931c13.773,0,24.932-11.164,24.932-24.931C150.026,181.663,142.7,172.223,132.595,169.042z"/>
                </g>
            </svg>
        </sidebaritem-component>
        <sidebaritem-component class="sidebar-item hyperlink" data-href="#/datecalculator">
            <svg slot="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="sidebar-icon" viewBox="0 0 470 470" preserveAspectRatio="xMidYMid meet" xml:space="preserve">
                <g>
                    <path d="M462.5,425H7.5c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h455c4.143,0,7.5-3.358,7.5-7.5S466.643,425,462.5,425z"/>
                    <path d="M462.5,455H7.5c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h455c4.143,0,7.5-3.358,7.5-7.5S466.643,455,462.5,455z"/>
                    <path d="M462.5,30h-25v-7.5C437.5,10.093,427.406,0,415,0s-22.5,10.093-22.5,22.5V30h-75v-7.5C317.5,10.093,307.406,0,295,0
                        s-22.5,10.093-22.5,22.5V30h-75v-7.5C197.5,10.093,187.407,0,175,0s-22.5,10.093-22.5,22.5V30h-75v-7.5C77.5,10.093,67.407,0,55,0
                        S32.5,10.093,32.5,22.5V30h-25C3.358,30,0,33.358,0,37.5v365c0,4.142,3.358,7.5,7.5,7.5h455c4.143,0,7.5-3.358,7.5-7.5v-365
                        C470,33.358,466.643,30,462.5,30z M407.5,22.5c0-4.136,3.364-7.5,7.5-7.5s7.5,3.364,7.5,7.5v30c0,4.136-3.364,7.5-7.5,7.5
                        s-7.5-3.364-7.5-7.5V22.5z M287.5,22.5c0-4.136,3.364-7.5,7.5-7.5s7.5,3.364,7.5,7.5v30c0,4.136-3.364,7.5-7.5,7.5
                        s-7.5-3.364-7.5-7.5V22.5z M167.5,22.5c0-4.136,3.364-7.5,7.5-7.5s7.5,3.364,7.5,7.5v30c0,4.136-3.364,7.5-7.5,7.5
                        s-7.5-3.364-7.5-7.5V22.5z M47.5,22.5c0-4.136,3.364-7.5,7.5-7.5s7.5,3.364,7.5,7.5v30c0,4.136-3.364,7.5-7.5,7.5
                        s-7.5-3.364-7.5-7.5V22.5z M32.5,45v7.5C32.5,64.907,42.593,75,55,75s22.5-10.093,22.5-22.5V45h75v7.5
                        c0,12.407,10.093,22.5,22.5,22.5s22.5-10.093,22.5-22.5V45h75v7.5c0,12.407,10.094,22.5,22.5,22.5s22.5-10.093,22.5-22.5V45h75v7.5
                        c0,12.407,10.094,22.5,22.5,22.5s22.5-10.093,22.5-22.5V45H455v77.3H15V45H32.5z M15,395V137.3h440V395H15z"/>
                    <path d="M412,226.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S416.143,226.8,412,226.8z"/>
                    <path d="M331,226.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S335.143,226.8,331,226.8z"/>
                    <path d="M250,226.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S254.143,226.8,250,226.8z"/>
                    <path d="M169,226.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S173.142,226.8,169,226.8z"/>
                    <path d="M88,226.8H58c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S92.142,226.8,88,226.8z"/>
                    <path d="M331,280.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S335.143,280.8,331,280.8z"/>
                    <path d="M250,280.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S254.143,280.8,250,280.8z"/>
                    <path d="M169,280.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S173.142,280.8,169,280.8z"/>
                    <path d="M88,280.8H58c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S92.142,280.8,88,280.8z"/>
                    <path d="M331,334.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S335.143,334.8,331,334.8z"/>
                    <path d="M412,280.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S416.143,280.8,412,280.8z"/>
                    <path d="M412,334.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S416.143,334.8,412,334.8z"/>
                    <path d="M250,334.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S254.143,334.8,250,334.8z"/>
                    <path d="M169,334.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S173.142,334.8,169,334.8z"/>
                    <path d="M88,334.8H58c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S92.142,334.8,88,334.8z"/>
                    <path d="M412,172.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S416.143,172.8,412,172.8z"/>
                    <path d="M331,172.8h-30c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S335.143,172.8,331,172.8z"/>
                    <path d="M250,172.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.143,0,7.5-3.358,7.5-7.5S254.143,172.8,250,172.8z"/>
                    <path d="M169,172.8h-30c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S173.142,172.8,169,172.8z"/>
                    <path d="M88,172.8H58c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h30c4.142,0,7.5-3.358,7.5-7.5S92.142,172.8,88,172.8z"/>
                </g>
            </svg>
        </sidebaritem-component>
        <sidebaritem-component class="sidebar-item hyperlink" data-href="#/timecalculator">
            <svg slot="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="sidebar-icon" viewBox="0 0 466.008 466.008" preserveAspectRatio="xMidYMid meet" xml:space="preserve">
                <g>
                    <g>
                        <g>
                            <path d="M233.004,0C104.224,0,0,104.212,0,233.004c0,128.781,104.212,233.004,233.004,233.004
                                c128.782,0,233.004-104.212,233.004-233.004C466.008,104.222,361.796,0,233.004,0z M233.004,436.008
                                C121.067,436.008,30,344.941,30,233.004S121.067,30,233.004,30s203.004,91.067,203.004,203.004S344.941,436.008,233.004,436.008z
                                "/>
                            <path d="M233.004,63.028c-8.284,0-15,6.716-15,15v149.507l-59.991,71.325c-5.333,6.34-4.516,15.802,1.824,21.135
                                c6.34,5.333,15.804,4.514,21.135-1.824l63.512-75.511c2.273-2.703,3.521-6.123,3.521-9.655V78.028
                                C248.004,69.743,241.289,63.028,233.004,63.028z"/>
                        </g>
                    </g>
                </g>
            </svg>
        </sidebaritem-component>
    </section>
    <footer-component class="footer"></footer-component>
`;

export default class SidebarView extends HTMLElement {
    constructor() {
        super();
        this.attachShadow({ mode: 'open' });
        this.shadowRoot.appendChild(template.content.cloneNode(true));
    }

    connectedCallback() {
        console.log("Sidebar view attached.");
        document.addEventListener('anchorActiveEvent', evt => this.updateActiveAnchorElement(evt));
    }

    disconnectedCallback() {

    }

    updateActiveAnchorElement(evt) {
        this.shadowRoot.querySelectorAll(".sidebar-item").forEach(element => {
            const isActiveLocation = (window.location == element.shadowRoot.querySelector('a').href);
            element.className = isActiveLocation ? 'sidebar-item hyperlink active' : 'sidebar-item hyperlink';
        });
    }
}

window.customElements.define('sidebar-view', SidebarView);